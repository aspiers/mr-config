# -*- mode: sh -*-

[DEFAULT]

include =
    # FIXME: this should be available to all include routines
    include_files() {
        for f in "$@"; do
            case "$f" in
                *.orig|*~) continue ;;
            esac
            \
            echo "# INCLUDED FROM: $f"
            cat "$f"
            echo # Needed in case file isn't terminated with a newline
        done
    }
    #
    stow_lib=$HOME/.GIT/3rd-party/mr/lib/stow
    if [ -e "$stow_lib" ]; then
        include_files "$stow_lib"
    else
        echo "Couldn't find $stow_lib - stow functions will be absent." >&2
    fi
    #
    for d in ~/.config/mr/lib ~/.config/mr/groups.d; do
        if [ -d "$d" ]; then
            include_files "$d"/*
        else
            echo "$d missing" >&2
        fi
    done
