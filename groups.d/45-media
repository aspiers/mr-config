# -*- mode: sh -*-

[$HOME/media]
skip = lazy || default_skipper
checkout = git_clone_my_repo
lib =
    set_email adam@spiers.net
    set_confidential_repo
remotes = auto_remotes

[$HOME/software/audio/mpdtoys]
skip = lazy || default_skipper
checkout = git_clone git://git.kitenet.net/mpdtoys.git
stowable = true
lib =
    mr_init_stow_package
fixups =
    # mpdtoys has a crappy Makefile which only supports
    # DESTDIR and has prefix hardcoded to /usr
    [ -d $STOW_PKG_PATH ] || mkdir $STOW_PKG_PATH
    pushd $STOW_PKG_PATH
    [ -e bin/mpload ] && rm -rf * # try to be safe
    popd
    make install DESTDIR=${STOW_PKG_PATH%/}
    cd $STOW_PKG_PATH
    mv usr/* .
    rmdir usr
    mr_restow_regardless

[$HOME/video]
skip = lazy || default_skipper
checkout = moosehall_git_checkout
lib =
    set_email adam@spiers.net
    set_confidential_repo
remotes = auto_remotes
